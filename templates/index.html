{% extends "base.html" %}

{% block content %}
<div class="card">
    <h2>Assess a Product</h2>
    <p style="margin-bottom: 1.5rem; color: #666;">
        Enter a product name, vendor, or URL to generate a comprehensive security assessment.
    </p>
    
    <form id="assessmentForm">
        <div class="form-group">
            <label for="input_text">Product Name, Vendor, or URL</label>
            <input 
                type="text" 
                id="input_text" 
                name="input_text" 
                placeholder="e.g., Slack, Microsoft Teams, https://example.com"
                required
            >
        </div>
        
        <div class="form-group">
            <label>
                <input type="checkbox" id="use_cache" name="use_cache" checked>
                Use cached results (if available within 24 hours)
            </label>
        </div>
        
        <button type="submit" id="submitBtn">Generate Assessment</button>
    </form>
</div>

<div id="loading" class="loading">
    <div class="spinner"></div>
    <div id="progressContainer" style="margin-top: 1.5rem; text-align: left; max-width: 500px; margin-left: auto; margin-right: auto;">
        <p id="progressMessage">Initializing assessment...</p>
        
        <!-- Multi-agent progress stages -->
        <div id="multiAgentProgress" style="display: none; margin-top: 1rem;">
            <div class="progress-stage" data-stage="preparation">
                <div class="progress-icon">â³</div>
                <div class="progress-label">Preparing Data</div>
                <div class="progress-status">pending</div>
            </div>
            <div class="progress-stage" data-stage="research">
                <div class="progress-icon">ğŸ”</div>
                <div class="progress-label">Research Agent Analyzing</div>
                <div class="progress-status">pending</div>
            </div>
            <div class="progress-stage" data-stage="verification">
                <div class="progress-icon">âœ…</div>
                <div class="progress-label">Verification Agent Cross-checking</div>
                <div class="progress-status">pending</div>
            </div>
            <div class="progress-stage" data-stage="synthesis">
                <div class="progress-icon">ğŸ“</div>
                <div class="progress-label">Synthesis Agent Compiling</div>
                <div class="progress-status">pending</div>
            </div>
        </div>
    </div>
</div>

<div id="results" style="display: none;">
    <div class="card">
        <h2>Assessment Results</h2>
        <div id="resultsContent"></div>
    </div>
</div>

<div id="errorMsg"></div>

{% endblock %}

{% block scripts %}
<script src="{{ url_for('static', filename='js/progress-tracker.js') }}"></script>
<script src="{{ url_for('static', filename='js/assessment-display.js') }}"></script>
<script src="{{ url_for('static', filename='js/form-handler.js') }}"></script>
{% endblock %}
